// GLOBAL VARIABLES
function loadClientWork(work_id){$.ajax({type:"GET",url:work_id+".php",success:function(content){var shutterflyVideo="//player.vimeo.com/video/66828414",news_article_oneVideo="//player.vimeo.com/video/62375672",klondikeVideo="//player.vimeo.com/video/62375672",viaVideo="//player.vimeo.com/video/66907062",perdueVideo="//player.vimeo.com/video/65842529";$("#"+work_id).next().html(content);setTimeout(function(){$("#"+work_id+" .client_information").hide();$("#"+work_id+" .vimeo").show().find("iframe").attr("src",eval(work_id.toString()+"Video"));$("#"+work_id).next().slideDown("slow")},1e3);globalEffects();$(".video_player").css({height:bottomVimeoHeight})}})}function unloadClientWork(e){$.ajax({type:"GET",url:"",success:function(){$("#"+e).next().html("")}})}function globalEffects(){$("li.work_content").hide();$(".vimeo.show").css({height:initialTopVimeoHeight});$("li.work-preview.closed").click(function(){var e=$(this).attr("id"),t=$(this).offset().top-navBarHeight;if($("li.work-preview").hasClass("open")){var n=$("li.work-preview.open").attr("id");closeWorkSection(n)}loadClientWork(e);$(this).removeClass("closed").addClass("open");$(".vimeo").css({height:endTopVimeoHeight});scrollUp(t);return!1});$(".close_button").click(function(){var e=$(this).closest("li").attr("id");closeWorkSection();unloadClientWork(e);$(window).scrollTo(windowHeight-190,500,{axis:"y",easing:"easeInCubic"});return!1});$(".secondary_nav_wrapper a").click(function(){var e=$(this).attr("href"),t=$(e).offset().top-navBarHeight;setTimeout(function(){});$(window).scrollTo(t,400,{axis:"y",easing:"easeInCubic"});return!1})}function scrollUp(e){$(window).scrollTo(e,500,{axis:"y",easing:"easeInCubic"})}function closeWorkSection(){$(".work_content").slideUp("fast");$(".vimeo").hide().find("iframe").attr("src","");$(".client_information").show();$("li.work-preview.open").removeClass("open").addClass("closed");$(".white_background").stop().animate({opacity:0,height:0},100)}function loadGoogleMaps(){function t(){var t={center:e,zoom:18,mapTypeId:google.maps.MapTypeId.HYBRID},n=new google.maps.Map(document.getElementById("googleMap"),t),r=new google.maps.Marker({position:e});r.setMap(n);var i=new google.maps.InfoWindow({content:"The VIA Agency"});i.open(n,r)}var e=new google.maps.LatLng(43.653978,-70.264331);google.maps.event.addDomListener(window,"load",t);$("#googleMap").css({width:500})}var windowHeight=$(window).height(),navBarOriginalPosition=200,navBarHeight=$("nav li").height(),initialWorkContentWidth=$(window).width()*.75,endWorkContentWidth=$(window).width()*.8,bottomVimeoHeight=endWorkContentWidth*.95*.56212,initialTopVimeoHeight=initialWorkContentWidth*.56212,endTopVimeoHeight=endWorkContentWidth*.56212;globalEffects();loadGoogleMaps();$(function(){var e=new $.BigVideo,t=["vids/welchs_shoot.m4v","vids/welchs_shoot2.m4v"];t.sort(function(){return.5-Math.random()});e.init();Modernizr.touch?e.show("img/bg2.gif"):e.show(t,{ambient:!0})});$(".center-column").css({"margin-top":windowHeight-navBarOriginalPosition});$("nav ul li a").click(function(){var e=$(this).offset().top,t=$("#work_preview").offset().top-navBarHeight,n=$(this).attr("id");$(window).scrollTo(t,500,{axis:"y",easing:"easeInCubic"});$.ajax({type:"GET",url:n+".php",success:function(e){$("#work_preview").css({"margin-top":2e3,opacity:.25},1e3).html(e).animate({"margin-top":0,opacity:1},"easeOutCubic");globalEffects();loadGoogleMaps()}});$("a.active").removeClass("active").addClass("inactive");$("a").hasClass("inactive")&&$(this).removeClass("inactive").addClass("active");return!1});$(window).scroll(function(){if($(window).scrollTop()>=windowHeight-navBarOriginalPosition-2){$("nav").removeClass("not-fixed").addClass("fixed");$("img.logo").addClass("logo-top");$(".secondary_nav_wrapper").addClass("fixed");$(".center-column").css({"padding-top":navBarHeight})}if($(window).scrollTop()<=windowHeight-navBarOriginalPosition-2){$("nav").removeClass("fixed").addClass("not-fixed");$("img.logo").removeClass("logo-top");$(".secondary_nav_wrapper").removeClass("fixed");$(".center-column").css({"padding-top":0})}});